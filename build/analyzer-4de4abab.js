import{S as e,i as t,s as n,h as i,c as r,n as a,f as o,e as l,t as s,a as u,d as m,j as c,b as d,k as f,l as p,p as N}from"./main.js";function S(e,t,n){const i=e.slice();return i[3]=t[n],i}function I(e){let t,n,i,a,p,N,I,b,h,g,P,k,v,A,U,E,w,M,T,D=e[1].orderDice+"",H=e[1].points+"",O=e[1].platoons,G=[];for(let t=0;t<O.length;t+=1)G[t]=y(S(e,O,t));return{c(){t=l("div"),n=l("div"),i=s("Order Dice: "),a=s(D),p=u(),N=l("div"),I=s("Total Points: "),b=s(H),h=u();for(let e=0;e<G.length;e+=1)G[e].c();g=u(),P=l("div"),k=u(),v=l("div"),A=u(),U=l("div"),E=u(),w=l("div"),M=u(),T=l("div"),d(t,"class","flow")},m(e,o){r(e,t,o),m(t,n),m(n,i),m(n,a),m(t,p),m(t,N),m(N,I),m(N,b),m(t,h);for(let e=0;e<G.length;e+=1)G[e].m(t,null);m(t,g),m(t,P),m(t,k),m(t,v),m(t,A),m(t,U),m(t,E),m(t,w),m(t,M),m(t,T)},p(e,n){if(2&n&&D!==(D=e[1].orderDice+"")&&c(a,D),2&n&&H!==(H=e[1].points+"")&&c(b,H),2&n){let i;for(O=e[1].platoons,i=0;i<O.length;i+=1){const r=S(e,O,i);G[i]?G[i].p(r,n):(G[i]=y(r),G[i].c(),G[i].m(t,g))}for(;i<G.length;i+=1)G[i].d(1);G.length=O.length}},d(e){e&&o(t),f(G,e)}}}function b(e){let t,n,i;return{c(){t=l("form"),t.innerHTML='<label for="url">Import army:</label> \n\t\t<input type="url" name="url"/> \n\t\t<button type="submit">Submit</button>'},m(a,o){r(a,t,o),n||(i=p(t,"submit",N(e[2])),n=!0)},p:a,d(e){e&&o(t),n=!1,i()}}}function y(e){let t,n,i,a,d,f,p,N,S,I,b=e[3].name+"",y=e[3].subName+"",h=JSON.stringify(e[3],null,2)+"";return{c(){t=l("div"),n=s(b),i=u(),a=l("h3"),d=s(y),f=u(),p=l("div"),N=l("pre"),S=s(h),I=u()},m(e,o){r(e,t,o),m(t,n),r(e,i,o),r(e,a,o),m(a,d),r(e,f,o),r(e,p,o),m(p,N),m(N,S),m(p,I)},p(e,t){2&t&&b!==(b=e[3].name+"")&&c(n,b),2&t&&y!==(y=e[3].subName+"")&&c(d,y),2&t&&h!==(h=JSON.stringify(e[3],null,2)+"")&&c(S,h)},d(e){e&&o(t),e&&o(i),e&&o(a),e&&o(f),e&&o(p)}}}function h(e){let t;function n(e,t){return e[0]?b:I}let l=n(e),s=l(e);return{c(){s.c(),t=i()},m(e,n){s.m(e,n),r(e,t,n)},p(e,[i]){l===(l=n(e))&&s?s.p(e,i):(s.d(1),s=l(e),s&&(s.c(),s.m(t.parentNode,t)))},i:a,o:a,d(e){s.d(e),e&&o(t)}}}function g(e){if(e.SectionName.includes("Artillery"))return 6;if(e.UnitItems[0].ItemMobility){if(e.UnitItems[0].ItemMobility.includes("Wheeled"))return 24;if(e.UnitItems[0].ItemMobility.includes("Tracked"))return 18}return 12}function P(e){return e.SectionName.includes("Infantry")||e.SectionName.includes("Officer")||e.SectionName.includes("Mortar")||e.SectionName.includes("Sniper")||e.SectionName.includes("Anti-tank")||e.SectionName.includes("Artillery")?"Inexperienced"===e.UnitSkill?3:"Regular"===e.UnitSkill?4:"Veteran"===e.UnitSkill?5:4:e.SectionName.includes("Armoured Cars")||e.SectionName.includes("Tanks and SP Guns")?Number(e.UnitItems[0].ItemDamageValue.slice(0,-1)):4}function k(e){return e.SectionName.includes("Infantry")||e.SectionName.includes("Officer")?e.UnitItems.filter(e=>!!e.ItemQuantity).flatMap(v).map(U):e.SectionName.includes("Mortar")||e.SectionName.includes("Artillery")||e.SectionName.includes("Sniper")||e.SectionName.includes("Machine Gun")||e.SectionName.includes("Anti-tank")?e.UnitItems.filter(e=>!!e.ItemQuantity).flatMap(e=>v(e)).map(U):e.SectionName.includes("Armoured Cars")||e.SectionName.includes("Tanks and SP Guns")?e.UnitItems.filter(e=>"true"===e.IsGun).map(U):[]}function v(e){return Array.from(Array(e.ItemQuantity)).map(()=>e)}function A(e){return Number(e.ItemPEN)||Number(e.ItemPen)||("HE"===e.ItemPen||"HE"===e.ItemPEN?(t=e.ItemNotes,Number(t.charAt(t.search(/HE \(/g)+4))):0)||0;var t}function U(e){return{pen:A(e),rof:(n=e.ItemROF,Number(n)?Number(n):n.includes("D6")?1:(n.includes("-"),2)),range:(t=e.ItemRange,"string"==typeof t?0===t.length?12:Number(t.slice(-3,-1)):Number(t)||12),type:E(e)};var t,n}function E(e){return Number(e.ItemPEN)||Number(e.ItemPen)?"AT":"HE"===e.ItemPen||"HE"===e.ItemPEN?"HE":"SA"}function w(e,t,n){let i,r=!0;return[r,i,async function(e){const t=new FormData(e.target).get("url");try{const e=await fetch("https://www.philippesimpson.dk/armylist.php?url="+t,{method:"GET"});if(!e.ok)throw new Error(e.statusText);const a=await e.json();console.log("result",a),n(0,r=!1),n(1,i=function(e){const t=e.Platoons.map(e=>{const t=e.Units.map(e=>({name:e.UnitName,sectionName:e.SectionName,skill:e.UnitSkill,damageValue:P(e),movement:g(e),weapons:k(e)}));return{name:e.PlatoonName,subName:e.PlatoonSubName,units:t}});return{orderDice:e.OrderDice,points:e.TotalPoints,platoons:t}}(a)),console.log(i)}catch(e){throw alert("Army list not found."),e}}]}export default class extends e{constructor(e){super(),t(this,e,w,h,n,{})}}
//# sourceMappingURL=analyzer-4de4abab.js.map
