{"version":3,"file":"index-0045d42a.js","sources":["../../src/pages/index.svelte"],"sourcesContent":["<script>\n    import { metatags, layout, url } from '@roxi/routify';\n    metatags.title = 'Mission generator';\n    metatags.description = 'Description coming soon...';\n\n    const emailPattern = \"[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,}$\";\n\n    function getRandomInt(max) {\n        return Math.floor(Math.random() * Math.floor(max));\n    }\n\n    function generate(event) {\n        const urls = $layout.parent.children\n            .filter(child => child.path === '/missions')[0]\n            .children\n            .map(child => child.path.slice(1));\n\n        // Assign mission to player #1:\n        const randomUrl1 = window.location.href + urls[getRandomInt(urls.length)];\n\n        Email.send({\n            SecureToken : \"0b6eed09-ca2b-41ed-9283-2d33686b5dd2\",\n            To : event.target.email1.value,\n            From : \"missions@philippesimpson.dk\",\n            Subject : \"You have been assigned a secret side mission\",\n            Body : `See your mission <a href=${randomUrl1}>here</a>`\n        }).then(\n            message => console.log(message, event.target.email1.value, randomUrl1)\n        );\n        \n        // Assign mission to player #1:\n        const randomUrl2 = window.location.href + urls[getRandomInt(urls.length)];\n\n        Email.send({\n            SecureToken : \"0b6eed09-ca2b-41ed-9283-2d33686b5dd2\",\n            To : event.target.email2.value,\n            From : \"missions@philippesimpson.dk\",\n            Subject : \"You have been assigned a secret side mission\",\n            Body : `See your mission <a href=${randomUrl2}>here</a>`\n        }).then(\n            message => console.log(message, event.target.email2.value, randomUrl2)\n        );\n    }\n</script>\n\n<!-- routify:options title=\"Main\" -->\n\n<svelte:head>\n    <script src=\"https://smtpjs.com/v3/smtp.js\"></script>\n</svelte:head>\n\n<p>\n    Randomly assign a secret side mission to each player:\n</p>\n\n<form on:submit|preventDefault={generate}>\n    <input\n        type=\"email\"\n        name=\"email1\"\n        pattern={emailPattern}\n        title=\"player 1 email address\"\n        required\n        placeholder=\"Player's email\">\n    vs.\n    <input\n        type=\"email\"\n        name=\"email2\"\n        pattern={emailPattern}\n        title=\"player 2 email address\"\n        required\n        placeholder=\"Player's email\">\n    \n    <input\n        type=\"submit\"\n        value=\"Submit\">\n</form>"],"names":["emailPattern","ctx","getRandomInt","max","Math","floor","random","metatags","title","description","event","urls","$layout","parent","children","filter","child","path","map","slice","randomUrl1","window","location","href","length","Email","send","SecureToken","To","target","email1","value","From","Subject","Body","then","message","console","log","randomUrl2","email2"],"mappings":"sgBA2DiBA,kJAQAA,wPAZeC,qFAlDtBD,EAAe,iDAEZE,EAAaC,UACXC,KAAKC,MAAMD,KAAKE,SAAWF,KAAKC,MAAMF,sDANjDI,EAASC,MAAQ,oBACjBD,EAASE,YAAc,uCAQLC,SACRC,EAAOC,EAAQC,OAAOC,SACvBC,OAAOC,GAAwB,cAAfA,EAAMC,MAAsB,GAC5CH,SACAI,IAAIF,GAASA,EAAMC,KAAKE,MAAM,IAG7BC,EAAaC,OAAOC,SAASC,KAAOZ,EAAKT,EAAaS,EAAKa,SAEjEC,MAAMC,MACFC,YAAc,uCACdC,GAAKlB,EAAMmB,OAAOC,OAAOC,MACzBC,KAAO,8BACPC,QAAU,+CACVC,iCAAmCd,eACpCe,KACCC,GAAWC,QAAQC,IAAIF,EAAS1B,EAAMmB,OAAOC,OAAOC,MAAOX,UAIzDmB,EAAalB,OAAOC,SAASC,KAAOZ,EAAKT,EAAaS,EAAKa,SAEjEC,MAAMC,MACFC,YAAc,uCACdC,GAAKlB,EAAMmB,OAAOW,OAAOT,MACzBC,KAAO,8BACPC,QAAU,+CACVC,iCAAmCK,eACpCJ,KACCC,GAAWC,QAAQC,IAAIF,EAAS1B,EAAMmB,OAAOW,OAAOT,MAAOQ"}