import{S as e,i as t,s as n,h as i,c as r,n as a,f as o,e as s,t as l,a as u,d as m,j as c,b as d,k as f,l as p,p as N}from"./main.js";function S(e,t,n){const i=e.slice();return i[3]=t[n],i}function I(e){let t,n,i,a,p,N,I,b,y,g,P,k,A,U,v,E,w,M,T,D=e[1].orderDice+"",H=e[1].points+"",G=e[1].platoons,O=[];for(let t=0;t<G.length;t+=1)O[t]=h(S(e,G,t));return{c(){t=s("div"),n=s("div"),i=l("Order Dice: "),a=l(D),p=u(),N=s("div"),I=l("Total Points: "),b=l(H),y=u();for(let e=0;e<O.length;e+=1)O[e].c();g=u(),P=s("div"),k=u(),A=s("div"),U=u(),v=s("div"),E=u(),w=s("div"),M=u(),T=s("div"),d(t,"class","flow")},m(e,o){r(e,t,o),m(t,n),m(n,i),m(n,a),m(t,p),m(t,N),m(N,I),m(N,b),m(t,y);for(let e=0;e<O.length;e+=1)O[e].m(t,null);m(t,g),m(t,P),m(t,k),m(t,A),m(t,U),m(t,v),m(t,E),m(t,w),m(t,M),m(t,T)},p(e,n){if(2&n&&D!==(D=e[1].orderDice+"")&&c(a,D),2&n&&H!==(H=e[1].points+"")&&c(b,H),2&n){let i;for(G=e[1].platoons,i=0;i<G.length;i+=1){const r=S(e,G,i);O[i]?O[i].p(r,n):(O[i]=h(r),O[i].c(),O[i].m(t,g))}for(;i<O.length;i+=1)O[i].d(1);O.length=G.length}},d(e){e&&o(t),f(O,e)}}}function b(e){let t,n,i;return{c(){t=s("form"),t.innerHTML='<label for="url">Import army:</label> \n\t\t<input type="url" name="url"/> \n\t\t<button type="submit">Submit</button>'},m(a,o){r(a,t,o),n||(i=p(t,"submit",N(e[2])),n=!0)},p:a,d(e){e&&o(t),n=!1,i()}}}function h(e){let t,n,i,a,d,f,p=e[3].name+"",N=e[3].subName+"";return{c(){t=s("div"),n=l(p),i=u(),a=s("h3"),d=l(N),f=u()},m(e,o){r(e,t,o),m(t,n),r(e,i,o),r(e,a,o),m(a,d),m(a,f)},p(e,t){2&t&&p!==(p=e[3].name+"")&&c(n,p),2&t&&N!==(N=e[3].subName+"")&&c(d,N)},d(e){e&&o(t),e&&o(i),e&&o(a)}}}function y(e){let t;function n(e,t){return e[0]?b:I}let s=n(e),l=s(e);return{c(){l.c(),t=i()},m(e,n){l.m(e,n),r(e,t,n)},p(e,[i]){s===(s=n(e))&&l?l.p(e,i):(l.d(1),l=s(e),l&&(l.c(),l.m(t.parentNode,t)))},i:a,o:a,d(e){l.d(e),e&&o(t)}}}function g(e){if(e.SectionName.includes("Artillery"))return 6;if(e.UnitItems[0].ItemMobility){if(e.UnitItems[0].ItemMobility.includes("Wheeled"))return 24;if(e.UnitItems[0].ItemMobility.includes("Tracked"))return 18}return 12}function P(e){return e.SectionName.includes("Infantry")||e.SectionName.includes("Officer")||e.SectionName.includes("Mortar")||e.SectionName.includes("Sniper")||e.SectionName.includes("Anti-tank")||e.SectionName.includes("Artillery")?"Inexperienced"===e.UnitSkill?3:"Regular"===e.UnitSkill?4:"Veteran"===e.UnitSkill?5:4:e.SectionName.includes("Armoured Cars")||e.SectionName.includes("Tanks and SP Guns")?Number(e.UnitItems[0].ItemDamageValue.slice(0,-1)):4}function k(e){return e.SectionName.includes("Infantry")||e.SectionName.includes("Officer")?e.UnitItems.filter(e=>!!e.ItemQuantity).flatMap(A).map(v):e.SectionName.includes("Mortar")||e.SectionName.includes("Artillery")||e.SectionName.includes("Sniper")||e.SectionName.includes("Machine Gun")||e.SectionName.includes("Anti-tank")?e.UnitItems.filter(e=>!!e.ItemQuantity).flatMap(e=>A(e)).map(v):e.SectionName.includes("Armoured Cars")||e.SectionName.includes("Tanks and SP Guns")?e.UnitItems.filter(e=>"true"===e.IsGun).map(v):[]}function A(e){return Array.from(Array(e.ItemQuantity)).map(()=>e)}function U(e){return Number(e.ItemPEN)||Number(e.ItemPen)||("HE"===e.ItemPen||"HE"===e.ItemPEN?(t=e.ItemNotes,Number(t.charAt(t.search(/HE \(/g)+4))):0)||0;var t}function v(e){return{pen:U(e),rof:(n=e.ItemROF,Number(n)?Number(n):n.includes("D6")?1:(n.includes("-"),2)),range:(t=e.ItemRange,"string"==typeof t?0===t.length?12:Number(t.slice(-3,-1)):Number(t)||12),type:E(e)};var t,n}function E(e){return Number(e.ItemPEN)||Number(e.ItemPen)?"AT":"HE"===e.ItemPen||"HE"===e.ItemPEN?"HE":"SA"}function w(e,t,n){let i,r=!0;return[r,i,async function(e){const t=new FormData(e.target).get("url");try{const e=await fetch("https://www.philippesimpson.dk/armylist.php?url="+t,{method:"GET"});if(!e.ok)throw new Error(e.statusText);const a=await e.json();console.log("result",a),n(0,r=!1),n(1,i=function(e){const t=e.Platoons.map(e=>{const t=e.Units.map(e=>({name:e.UnitName,sectionName:e.SectionName,skill:e.UnitSkill,damageValue:P(e),movement:g(e),weapons:k(e)}));return{name:e.PlatoonName,subName:e.PlatoonSubName,units:t}});return{orderDice:e.OrderDice,points:e.TotalPoints,platoons:t}}(a)),console.log(i)}catch(e){throw alert("Army list not found."),e}}]}export default class extends e{constructor(e){super(),t(this,e,w,y,n,{})}}
//# sourceMappingURL=analyzer-a536abd2.js.map
